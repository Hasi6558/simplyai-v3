<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Button Style Test</title>
    <link rel="stylesheet" href="/fonts.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            margin: 40px;
            line-height: 1.6;
        }
        
        .demo-section {
            margin: 40px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 8px;
        }
        
        button, .btn {
            padding: 12px 24px;
            margin: 8px;
            background: #007bff;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
        }
        
        button:hover, .btn:hover {
            background: #0056b3;
        }
        
        input[type="text"], input[type="email"], select, textarea {
            padding: 8px 12px;
            margin: 8px;
            border: 2px solid #ddd;
            font-size: 16px;
            width: 200px;
        }
        
        .style-controls {
            margin: 20px 0;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .card {
            padding: 20px;
            margin: 10px;
            background: white;
            border: 1px solid #ddd;
            display: inline-block;
            width: 200px;
        }
    </style>
</head>
<body>
    <h1>Button Style Test Page</h1>
    <p>This page demonstrates the button style functionality from your database settings.</p>
    
    <div class="style-controls">
        <h3>Test Button Styles</h3>
        <button onclick="applyStyle('pill')">Apply Pill Style</button>
        <button onclick="applyStyle('rounded')">Apply Rounded Style</button>
        <button onclick="applyStyle('square')">Apply Square Style</button>
        
        <div style="margin-top: 10px;">
            <strong>Current Style:</strong> <span id="current-style">Loading...</span>
        </div>
    </div>
    
    <div class="demo-section">
        <h3>Buttons</h3>
        <button>Primary Button</button>
        <button style="background: #28a745;">Success Button</button>
        <button style="background: #dc3545;">Danger Button</button>
        <div class="btn">Div with .btn class</div>
    </div>
    
    <div class="demo-section">
        <h3>Form Elements</h3>
        <input type="text" placeholder="Text Input" />
        <input type="email" placeholder="Email Input" />
        <select>
            <option>Select Option 1</option>
            <option>Select Option 2</option>
        </select>
        <textarea placeholder="Textarea" rows="3"></textarea>
    </div>
    
    <div class="demo-section">
        <h3>Cards/Panels</h3>
        <div class="card">
            <h4>Card 1</h4>
            <p>This is a card component.</p>
            <button>Card Button</button>
        </div>
        <div class="card">
            <h4>Card 2</h4>
            <p>Another card component.</p>
            <button>Another Button</button>
        </div>
    </div>
    
    <script>
        // Function to apply button style
        function applyStyle(style) {
            // Remove existing style classes
            document.body.classList.remove('button-style-pill', 'button-style-rounded', 'button-style-square');
            
            // Add new style class
            document.body.classList.add(`button-style-${style}`);
            
            // Update display
            document.getElementById('current-style').textContent = style.charAt(0).toUpperCase() + style.slice(1);
            
            console.log(`Applied button style: ${style}`);
        }
        
        // Function to get current style from database
        async function loadCurrentStyle() {
            try {
                const response = await fetch('http://localhost:4000/api/settings');
                const data = await response.json();
                
                if (data.success && data.data && data.data.button_style) {
                    applyStyle(data.data.button_style);
                } else {
                    applyStyle('rounded'); // default
                }
            } catch (error) {
                console.error('Error loading current style:', error);
                applyStyle('rounded'); // default fallback
            }
        }
        
        // Load current style on page load
        loadCurrentStyle();
        
        // Listen for style updates from admin settings
        window.addEventListener('fontSettingsUpdated', function(event) {
            if (event.detail && event.detail.fontSettings && event.detail.fontSettings.button_style) {
                applyStyle(event.detail.fontSettings.button_style);
            }
        });
    </script>
</body>
</html>